---
title: Installing Windows Server 2008 R2 on a VM
layout: default
tags:
  - guides
  - virtualisation
  - server

type: regular
---

<p>I've just been installing Windows Server 2008 R2 onto a virtual machine: since it's freely available from <a href="http://www.dreamspark.com" target="_blank">Dreamspark</a> (thanks, <a href="http://twitter.com/mikeborozdin" target="_blank">Mike Borodizn</a>), and is easy to convert to a workstation that's a bit lighter and faster than Windows 7 (apparently). It also seems to run all the games I want to play, along with the software I regularly use (Dreamweave and Photoshop).<br />Sooo, I thought I'd put a brief howto together!</p>
<!-- more -->
<p>I'll be using VirtualBox for this, with a Vista 32-bit host, and installing Server 2008 R2 64-bit as the guest.</P>
<ol><li>Create a new VM in virtualbox.</li>
<li>Once done, select it and hit settings, and change the OS Type to <strong>Windows 7 (64bit)</strong>. Also go into the System menu (on the left), make sure CD-ROM is above hard drive in the boot order, and tick the <strong>Enable IO APIC</strong>. Give it more memory if you want, and more video memory in the "Display" tab. Check the <strong>Enable 3d acceleration</strong> box too.</li>
<li>Mount your Server 2008 disc to a virtual drive, or use a physical disc, and make sure that the VM can see it (Settings -> Storage -> IDE Controllers).</li>
<li>Double click the machine to start it up.</li>
<li>If you get a black screen with errors, it's most likely that you haven't checked <strong>Enable IO APIC</strong>. Do that.</li>
<li>Install it as normal, fairly easy: click a few boxes, choose custom install, install as a new OS.</li>
<li>Eventually, it'll boot to a screen that lets you choose a new password. This has to include letters, numbers, and punctuation, and needs to be a decent length.</li>
<li>You'll get to the desktop. A sort of "first run" window will pop up, which actually prompts you to do most of the configuration you need. Ignore the <strong>Roles</strong> options, and go to <strong>Features</strong>. Install the <strong>Desktop Experience</strong> module, and reboot. It may ask for a reason why you're rebooting, just give it a brief description and click okay.</li>
<li>Once you've rebooted, we'll set about making it a more Workstation-like computer, and less server-y.</li>
</ol>
<p>So, we've installed all we need, now we do the configuration to make it more like a desktop, and less like a server. Most of this info comes from <a href="http://www.win2008workstation.com/" target="_blank">this site</a>, but I'll summarise it here.</p>
<ul><li>First, create a new non-admin user.
<ol><li>Hit <b>Windows key+r</b>.</li>
<li>type <b>control userpasswords2</b> and hit enter.</li>
<li>Click <b>Add...</b>, and fill in the info.</li>
<li>Enter a password twice (doesn't have to be as strong as the admin one), then click <b>Standard User</b> on the next screen. Then click Finish.</li>
</ol></li>
<li>We'll also configure this user to autologin:
<ol><li>Select the new user in the User Accounts pane.</li>
<li>Untick <b>Users must enter a user name and password to use this computer</b>, then click <b>Apply</b> and enter the user's password.</li>
<li>Click OK.</li></ol></li>
<li>Now we'll allow this user to shutdown the pc, and disable the annoying shutdown events tracker:
<ol><li>First, do another <b>windows+r</b> and type <b>gpedit.msc</b></li>
<li>Go to <b>Computer Configuration -> Administrative Templates -> System</b> and double click on <b>Display Shutdown Event Tracker</b> on the right hand pane. Disable it, and click okay.</li>
<li>Then, go to <b>Computer Configuration -> Windows Settings  -> Security Settings -> Local Policies  -> User Rights Assignment</b>.</li>
<li>Find <b>Shut down the system</b> in the right hand pane, and double click.<li>
<li>Add the username of your new user, and click <b>Check Names</b>. Click OK, then OK again.</li>
</ol></li>
<li>Lastly, we'll enable the audio service and themes, and reboot to our new user.
<ol><li><b>Windows+r</b>, <b>services.msc</b>, enter.</li>
<li>Find <b>Themes</b>, change <b>startup type</b> to <b>Automatic</b>, and click apply.</li>
<li>Find <b>Windows Audio</b>, and do the same.</li>
<li>Click Okay (etc), to save and close this window. Don't reboot just yet!</li>
<li>Click <b>Start -> Control Panel</b>, and find the Sound tab (either in Hardware and Sound, or just Sound).</li>
<li>Select the default device, click <b>properties</b>, and click the <b>advanced </b>tab. Uncheck <b>Give exclusive mode application priority<b>. Click okay twice to save and quit.</li>
<li>Finally, reboot. It should happen fairly quickly, and auto log you in to your user account.</li>
</ol></li>
<li>Make it pretty by right-clicking on the desktop, and choosing <b>Personalize</b>, followed by the <b>Aero Theme</b>. Click okay/apply/whatever.</li>
<li>Lastly, optimize it for applications, not background services:
<ol><li><b>Start -> </b>right click on <b>Computer</b>, and go Properties.</li>
<li><b>Advanced System Settings -> Perfomance -> Settings.</b></li>
<li><b>Advanced</b> tab, click the box that says <b>Programs</b>, and click okay twice.</li>
</ol></li>
<li>Maybe reboot again, just to be on the safe side.</li>
</ul>
<p>So, we're done! I myself currently have problems where the VM doesn't appear to have any network interfaces at all, or any audio devices. I'm still working out why.</p>
<p>Take a look at <a href="http://www.win2008workstation.com/" target="_blank">this site</a> for more info, especially <a href="http://www.win2008workstation.com/win2008/games-and-entertainment" target="_blank">this page about games and entertainment.</a>. Its pretty handy.</p>
<p>Please feel free to leave comments, or give me info on how to fix my broken stuff! I'll add it into the guide somewhere... When I get time and can be bothered, I'll add in screenshots.</p>
